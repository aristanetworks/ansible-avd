{# L2 Leaf Ethernet uplinks #}
{% for l2leaf_node_group in l2leafs.node_groups | arista.eos_avd.natural_sort %}
{%     for node in l2leafs.node_groups[l2leaf_node_group].nodes | arista.eos_avd.natural_sort %}
{%         if node == inventory_hostname %}
{%             if l2leafs.node_groups[l2leaf_node_group].uplink_interfaces is defined %}
{%                 set uplink_interfaces = l2leafs.node_groups[l2leaf_node_group].uplink_interfaces %}
{%             else %}
{%                 set uplink_interfaces = l2leafs.defaults.uplink_interfaces %}
{%             endif %}
{%             set channel_group_id = (uplink_interfaces[0] | regex_findall("\d") | join ) %}
{%             if l2leafs.node_groups[l2leaf_node_group].parent_l3leafs is defined %}
{%                 set parent_l3leafs = l2leafs.node_groups[l2leaf_node_group].parent_l3leafs %}
{%             else %}
{%                 set parent_l3leafs = l2leafs.defaults.parent_l3leafs %}
{%             endif %}
{%             for uplink_interface in uplink_interfaces %}
  {{ uplink_interfaces[loop.index0] }}:
    description: {{ parent_l3leafs[loop.index0]}}_{{ l2leafs.node_groups[l2leaf_node_group].nodes[node].l3leaf_interfaces[loop.index0] }}
    channel_group:
      id: {{ channel_group_id }}
      mode: active
{%             endfor %}
{%         endif %}
{%     endfor %}
{% endfor %}